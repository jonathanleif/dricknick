// pages/index.js

import React, { useState } from 'react';

const mockedForecast = [
  { date: '2025-05-27', maxTemp: 21, weather: 'Sunny' },
  { date: '2025-05-28', maxTemp: 18, weather: 'Cloudy' },
  { date: '2025-05-29', maxTemp: 19, weather: 'Rain' },
  { date: '2025-05-30', maxTemp: 20, weather: 'Sunny' },
  { date: '2025-05-31', maxTemp: 17, weather: 'Overcast' },
  { date: '2025-06-01', maxTemp: 22, weather: 'Sunny' },
  { date: '2025-06-02', maxTemp: 23, weather: 'Sunny' },
  { date: '2025-06-03', maxTemp: 18, weather: 'Cloudy' },
  { date: '2025-06-04', maxTemp: 16, weather: 'Rain' },
  { date: '2025-06-05', maxTemp: 20, weather: 'Sunny' },
];

export default function Home() {
  const [tempOverrides, setTempOverrides] = useState({});

  const pumpTemp = (index) => {
    setTempOverrides((prev) => ({
      ...prev,
      [index]: (prev[index] || 0) + 1,
    }));
  };

  const getAdjustedTemp = (day, index) => {
    return day.maxTemp + (tempOverrides[index] || 0);
  };

  const isDricknickActivated = (index) => {
    const adjustedTemp = getAdjustedTemp(mockedForecast[index], index);
    return index === 1 && adjustedTemp >= 20;
  };

  const tomorrow = mockedForecast[1];
  const adjustedTomorrowTemp = getAdjustedTemp(tomorrow, 1);
  const tomorrowIsDricknick = adjustedTomorrowTemp >= 20;

  return (
    <div style={{ fontFamily: 'sans-serif', padding: '2rem', backgroundColor: '#f7f9fc' }}>
      <h1>🌤️ Big Fig Dricknick Tracker</h1>
      <p>Forecast for Vasastan, Stockholm</p>

      <div style={{
        margin: '2rem 0',
        padding: '1.5rem',
        backgroundColor: tomorrowIsDricknick ? '#d4edda' : '#f8d7da',
        color: tomorrowIsDricknick ? '#155724' : '#721c24',
        fontSize: '2rem',
        fontWeight: 'bold',
        textAlign: 'center',
        borderRadius: '8px'
      }}>
        {tomorrowIsDricknick ? '🍻 YES! It’s Dricknick Time Tomorrow!' : '🚫 Nope. No Dricknick Tomorrow.'}
      </div>

      <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '1rem' }}>
        {mockedForecast.map((day, index) => {
          const adjustedTemp = getAdjustedTemp(day, index);
          const highlight = isDricknickActivated(index);

          return (
            <div key={day.date} style={{ border: '1px solid #ccc', padding: '1rem', borderRadius: '10px', backgroundColor: highlight ? '#fffae6' : '#fff' }}>
              <h3>{day.date}</h3>
              <p>🌡️ Max Temp: {adjustedTemp}°C</p>
              <p>🌈 Weather: {day.weather}</p>
              <button onClick={() => pumpTemp(index)} style={{ marginTop: '0.5rem' }}>Pump the Temp ☀️</button>
              {highlight && (
                <div style={{ marginTop: '1rem', backgroundColor: '#ffe08a', padding: '0.5rem', borderRadius: '6px' }}>
                  🥳 <strong>Dricknick Activated!</strong><br/>
                  📍 <em>17:00 at Koppartälten, Hagaparken</em>
                </div>
              )}
            </div>
          );
        })}
      </div>
    </div>
  );
}
